<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Rafa Ej</title>
</head>
<body>
    
    <hr />
    <h2 id="mensaje" style="color: tomato"></h2>

    <table border="1" id="tabla">
        <thead>
            <tr>
               
            </tr>
        </thead>
        <tbody></tbody>
    </table>


    <script src="../Jquery/jquery-3.5.1.min.js"></script>
    <script>
        var urlApi = "https://apicruddepartamentoscore.azurewebsites.net";
        $(document).ready(function () {
            cargarEmpleados();

           
           
        });
         function readEmployees() {
                alert("HG");
            }
        function cargarDepartamentos() {
            var request = "/api/departamentos";

            $.getJSON(urlApi + request, function (data) {

                var th = $("<th>", {
                        "text": "Numero"
                })
                $("#tabla thead tr").append(th);
                var th = $("<th>", {
                        "text": "Nombre"
                })
                $("#tabla thead tr").append(th);
                var th = $("<th>", {
                        "text": "Localidad"
                })
                $("#tabla thead tr").append(th);

                $.each(data, function (index, dept) {

                    var tr = $("<tr>", {
                        "value": dept.numero
                    })
                    tr.click( () => readEmployees() );
                    $("#tabla tbody").append(tr);

                    var td = $("<td>", {
                        "text": dept.numero
                    })
                    $("#tabla tbody").append(td);
                    var td = $("<td>", {
                        "text": dept.nombre
                    })
                    $("#tabla tbody").append(td);
                    var td = $("<td>", {
                        "text": dept.localidad
                    })
                    $("#tabla tbody").append(td);
                    
                })


            })
        }

        function cargarEmpleados() {
            urlApi = "https://apiempleadosspgs.azurewebsites.net";
            var request = "/api/empleados";

            $.getJSON(urlApi + request, function (data) {

                

                $.each(data, function (index, emp) {

                    var tr = $("<tr>", {
                        "value": emp.idEmpleado
                    })
                    tr.click( () => readEmployees() );
                    $("#tabla tbody").append(tr);

                    var td = $("<td>", {
                        "text": emp.apellido
                    })
                    $("#tabla tbody").append(td);

                    var td = $("<td>", {
                        "text": emp.oficio
                    })
                    $("#tabla tbody").append(td);

                    var td = $("<td>", {
                        "text": emp.salario
                    })
                    $("#tabla tbody").append(td);

                    var td = $("<td>", {
                        "text": emp.departamento
                    })
                    $("#tabla tbody").append(td);
                  
                    
                })


            })
        }
    </script>
</body>
</html>